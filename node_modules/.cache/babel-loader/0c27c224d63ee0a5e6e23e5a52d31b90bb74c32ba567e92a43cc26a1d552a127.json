{"ast":null,"code":"import _toConsumableArray from\"C:/A-Mart/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect,useState}from'react';import{Link,useLocation,useParams,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(){var _useParams=useParams(),id=_useParams.id;var productId=id;var location=useLocation();var qty=location.search?Number(location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var navigate=useNavigate();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){if(userInfo){navigate(\"/shipping\");}else{navigate(\"/login\");}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block w-100\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","useState","Link","useLocation","useParams","useNavigate","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","_useParams","id","productId","location","qty","search","Number","split","dispatch","navigate","cart","state","cartItems","userLogin","userInfo","removeFromCartHandler","checkoutHandler","children","md","length","variant","to","map","item","Item","src","image","alt","name","fluid","rounded","concat","product","price","Control","as","value","onChange","e","target","_toConsumableArray","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["C:/A-Mart/backend/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport { Link, useLocation, useParams, useNavigate} from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\n\r\nfunction CartScreen() {\r\n  const { id } = useParams();\r\n  const productId = id;\r\n\r\n  const location  = useLocation()\r\n  const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1;\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate()\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, [dispatch, productId, qty]);\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n\r\n  const checkoutHandler = () => {\r\n    if (userInfo) {\r\n      navigate(\"/shipping\");\r\n    } else {\r\n      navigate(\"/login\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message variant=\"info\">\r\n            Your cart is empty <Link to=\"/\">Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant=\"flush\">\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n                  <Col md={3}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n\r\n                  <Col md={2}>${item.price}</Col>\r\n\r\n                  <Col md={3}>\r\n                    <Form.Control\r\n                      as=\"select\"\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n\r\n                  <Col md={1}>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"light\"\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n                items\r\n              </h2>\r\n              $\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                .toFixed(2)}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n\r\n          <ListGroup.Item className=\"d-flex justify-content-center\"> \r\n            <Button\r\n              type=\"button\"\r\n              className=\"btn-block w-100\"\r\n              disabled={cartItems.length === 0}\r\n              onClick={checkoutHandler}\r\n            >\r\n              Proceed To Checkout\r\n            </Button>\r\n          </ListGroup.Item>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default CartScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}